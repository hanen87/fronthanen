<form [formGroup]="form" (ngSubmit)="sendDemande()"> 

<div class="page-content-wrapper" >
  <div class="page-content">
    <div class="page-bar" *ngIf="show_section_demande">
      <div class="page-title-breadcrumb">
        <div class="card">
          <div class="card-body">
            <div class="card-head">
              <header class="mb-3">Demande d’octroi d’accès aux systèmes d’informations </header></div>
           <fieldset style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
            <legend class="ml-5"> Demandeur </legend>

            <div class="row ml-5 mr-5 form-material">
              <div class="col-md-12 d-flex">
                <label class="form-control">Demande pour : </label>
                <select class="form-control mb-2" formControlName="pour" name="pour"
                 (change)="getDemandeurInfo()" >
                  <option value="moi"> Moi </option>
                  <option value="Nouvelle Recrue"> Nouvelle Recrue </option>
                  <option value="Interminaire"> Intérimaire </option>
                  <option value="Surbonne"> Subordonné </option>

                </select>
              </div>
              <div class="col-md-12 mt-2 d-flex">

                <label class="form-control"> Matricule:</label>
                <input class="form-control" formControlName="matricule"
                 name="matricule" value={{matricule}} (change)="getDemandeurInfo()"
                 type="text" >
              </div> 
              <!-- <div *ngIf="show_demandeur_search">
                  demandeur not exist
              </div> -->
              <div class="col-md-6">
                <label class="m-t-20">Nom  :</label>
                <input class="form-control" value={{nom}} type="text">
              </div> 
              <div class="col-md-6">

                <label class="m-t-20">Prénom :</label>
                <input class="form-control" value={{prenom}} type="text">
              </div>
                <div class="col-md-6">

                <label class="m-t-20">Fonction :</label>
                <input class="form-control" value={{fonction}} type="text">
                </div>
                <div class="col-md-6">

                <label class="form-control"> etablissement :</label>
                <input class="form-control" value={{etablissement}} type="text" >

              </div>

            </div>
           </fieldset>
          </div>
        </div>
<!-- start page content -->

        <div class="row">
          <div class="col-md-12">
            <div class="tabbable-line">
              <div class="tab-content">
                <div class="tab-pane active fontawesome-demo" id="tab1">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="card card-box">                    
                       <div class="card-body ">
                          <div class="row mr-5 ml-5">
                            <div class="col-md-6 col-sm-6 col-6">
                              <div class="btn-group">
                                <!--                            <a href="add_professor.html" id="addRow"-->
                                <!--                               class="btn btn-info">-->
                                <!--                              Add New <i class="fa fa-plus"></i>-->
                                <!--                            </a>-->
                              </div>
                            </div>
                            <!--                        <div class="col-md-6 col-sm-6 col-6">-->
                            <!--                          <div class="btn-group pull-right">-->
                            <!--                            <a class="btn deepPink-bgcolor  btn-outline dropdown-toggle"-->
                            <!--                               data-toggle="dropdown">Tools-->
                            <!--                              <i class="fa fa-angle-down"></i>-->
                            <!--                            </a>-->
                            <!--                            <ul class="dropdown-menu pull-right">-->
                            <!--                              <li>-->
                            <!--                                <a href="javascript:;">-->
                            <!--                                  <i class="fa fa-print"></i> Print </a>-->
                            <!--                              </li>-->
                            <!--                              <li>-->
                            <!--                                <a href="javascript:;">-->
                            <!--                                  <i class="fa fa-file-pdf-o"></i> Save as-->
                            <!--                                  PDF </a>-->
                            <!--                              </li>-->
                            <!--                              <li>-->
                            <!--                                <a href="javascript:;">-->
                            <!--                                  <i class="fa fa-file-excel-o"></i>-->
                            <!--                                  Export to Excel </a>-->
                            <!--                              </li>-->
                            <!--                            </ul>-->
                            <!--                          </div>-->
                            <!--                        </div>-->
                          </div> 
                          <fieldset class="pt-5 pr-5 pl-5" style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                            <legend class="ml-5"> Accès </legend>

                            <div class="row form-material mx-5">
                              <div class="col-md-3">
                                <label class="form-control">Application</label>
                                <select class="form-control" formControlName="application">
                                  <option *ngFor="let application of applications" 
                                  [value]="application.id"> {{application.nom}}</option>
                                
                                </select>
                                
                                         
                              </div>
                              
                              <div class="col-md-3">
                                <label class="form-control">Profil </label>
                                <select class="form-control" formControlName="profil">
                                  <option value="profil01"> comptable</option>
                                  <option value="profil02"> financier</option>
                                  <option value="profil03"> Manager DSI</option>
                                  <option value="profil04"> chef de secteur Achat</option>

                                </select>
                                
                               
                
                              </div>
                              <!-- <div class="col-md-3">
                                <label class="form-control">Magasin </label>
                                <select class="form-control" formControlName="magasin" >
                                  <option value="magasin01"> magasin 1</option>
                                  <option value="magasin02"> magasin 2</option>
                                  <option value="magasin03"> magasin 3</option>
                                  <option value="magasin04"> magasin 4</option>
                                </select>
                                
                               
                
                              </div> -->
                              <div class="col-md-3"> 
                                <button type="button" (click)="Ajouter_Application_to_SelectedApplications()"
                                class="btn btn-primary btn-xs">
                                   <i class="text-white fa fa-plus "></i> 
                                 </button>
                                  </div>
                            </div>
                          <div class="table-scrollable">
                            <table *ngIf="added_applications.length>0"
                              class="table table-striped table-bordered table-hover table-checkable order-column valign-middle"
                              id="example4">
                              <thead>
                              <tr>

                                <th> Application</th>
                                <th> Profil </th>
                                <!-- <th> Magasin </th> -->
                                <th style="min-width: 50px !important;">
                                </th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr class="odd gradeX" *ngFor="let app of added_applications; 
                              let index=index">
                                <td>{{app.application.nom}}</td>
                                <td><a href="">
                                 {{app.profil}} </a></td>
                                <!-- <td><a href="">
                                  {{app.magasin}}</a></td> -->
                                  <td style="min-width: 50px !important;">
                                    <button (click)="supprimer_demande(index)"
                                    class="btn btn-danger btn-xs">
                                       <i class="fa fa-trash-o "></i> 
                                     </button>
                                  </td>
                               
                              </tr>
                   

                              </tbody>
                            </table>
                          </div>
                          </fieldset>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
<!-- end page content -->

        <div class="card">
          <div class="card-body">

            <div class="card-head">
              <fieldset class="pb-5" style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                <legend class="ml-5"> Validité </legend>
            <div class="row form-material mr-5 ml-5">
              <div class="col-md-6">
                <label class="form-control">Date d'effect  :</label>
                <input class="form-control" formControlName="date_effect" type="date">



              </div>
              <div class="col-md-6">
                <label class="form-control" >Date d'annulation  :</label>
                <input class="form-control"  formControlName="date_annulation" type="date">



              </div>

            </div>
              </fieldset>
          </div>

        </div>
        </div> 


        <div class="card">
          <div class="card-body">

            <div class="card-head">
              <fieldset class="pb-5" style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                <legend class="ml-5"> Remarque </legend>
            <div class="row form-material mr-5 ml-5">
              <div class="col-md-12">
                <textarea class="form-control" formControlName="remarque" rows="5">

                </textarea>

              </div>
           

            </div>
              </fieldset>
          </div>

        </div>
        </div> 

        <div class="col-lg-12 p-t-20 text-center">
          <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink">Créer</button>
          <button type="button" (click)="reset()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 btn-default">Annuler</button>
        </div>


      </div> 
    </div> 


    <!-- <div  style="margin-left: 200px;" *ngIf="!show_section_demande"> 
      <div class="box mx-5" >
        <div class="container">
             <div class="row">
                 
                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                   
                        <div class="box-part text-center">
                                                                                                                    
                          <div class="text">
                                <span> Votre demande {{reference}} a été envoyé avec success au service DRH..</span>
                            </div>                        
                         </div>
                    </div>	 
                    </div>
                    </div>
                    </div>
                    
    
    </div>  -->



  </div> 
</div>
</form>