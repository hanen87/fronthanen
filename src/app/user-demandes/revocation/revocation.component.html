<form [formGroup]="form" (ngSubmit)="sendDemande()"> 

    <div class="page-content-wrapper">
      <div class="page-content">
        <div class="page-bar">
          <div class="page-title-breadcrumb">
            <div class="card">
              <div class="card-body">
                <div class="card-head">
                  <header class="mb-3">Demande de révocation d’accès aux systèmes d’informations </header></div>
               <fieldset style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                <legend class="ml-5"> Demandeur </legend>
    
                <div class="row ml-5 mr-5 form-material">
                  <div class="col-md-12 d-flex">
                    <label class="form-control">Demande pour : </label>
                    <select class="form-control mb-2" (change)="getDemandeurInfo()" class="form-control mb-2" formControlName="pour"  > 
                      <!-- <option > Moi </option> -->
                      <option value="Interminaire"> Intérimaire </option>
                      <option value="Surbonne"> Subordonné </option>
    
                    </select>
                  </div>
                  <div class="col-md-12 mt-2 d-flex">
    
                    <label class="form-control"> Matricule:</label>
                    <input class="form-control" formControlName="matricule" (change)="getDemandeurInfo()" value={{matricule}} type="text" >
                  </div>
                  <div class="col-md-6">
                    <label class="m-t-20">Nom  :</label>
                    <input class="form-control" value={{nom}} type="text">
                  </div> 
                  <div class="col-md-6">
    
                    <label class="m-t-20">Prénom :</label>
                    <input class="form-control" value={{prenom}} type="text">
                  </div>
                    <div class="col-md-6">
    
                    <label class="m-t-20">Fonction :</label>
                    <input class="form-control" value={{fonction}} type="text">
                    </div>
                    <div class="col-md-6">
    
                    <label class="form-control"> Etablissement :</label>
                    <input class="form-control" value={{etablissement}} type="text" >
    
                  </div>
    
                </div>
               </fieldset>
              </div>
            </div>
    <!-- start page content -->
    
            <div class="row">
              <div class="col-md-12">
                <div class="tabbable-line">
                  <div class="tab-content">
                    <div class="tab-pane active fontawesome-demo" id="tab1">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="card card-box">                    
                           <div class="card-body ">
                              <div class="row mr-5 ml-5">
                                <div class="col-md-6 col-sm-6 col-6">
                                  <div class="btn-group">                            
                                  </div>
                                </div>
                              </div> 
                              <fieldset class="pt-5 pr-5 pl-5" style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                                <legend class="ml-5"> Accès </legend>
    
                                <div class="row form-material mx-5">
                                  <div class="col-md-3">
                                    <label class="form-control">Application</label>
                                    <select class="form-control" formControlName="application">
                                      <option *ngFor="let application of applications" 
                                      [value]="application.id"> {{application.nom}}</option>
                                    
                                    </select>
                                    
                                             
                                  </div>
                                  
                                  <div class="col-md-3">
                                    <label class="form-control">Profil </label>
                                    <select class="form-control" formControlName="profil">
                                      <option value="profil01"> comptable</option>
                                      <option value="profil02"> fiancier</option>
                                      <option value="profil03"> Manager DSI</option>
                                      <option value="profil04"> Chef de secteur Achat</option>
    
                                    </select>
                                    
                                   
                    
                                  </div>
                                  <!-- <div class="col-md-3">
                                    <label class="form-control">Magasin </label>
                                    <select class="form-control" formControlName="magasin" >
                                      <option value="magasin01"> magasin 1</option>
                                      <option value="magasin02"> magasin 2</option>
                                      <option value="magasin03"> magasin 3</option>
                                      <option value="magasin04"> magasin 4</option>
                                    </select>
                                    
                                   
                    
                                  </div> -->
                                  <div class="col-md-3"> 
                                    <button type="button" (click)="Ajouter_Application_to_SelectedApplications()"
                                    class="btn btn-primary btn-xs">
                                       <i class="text-white fa fa-plus "></i> 
                                     </button>
                                      </div>
                                </div>
                              <div class="table-scrollable">
                                <table *ngIf="added_applications.length>0"
                                  class="table table-striped table-bordered table-hover table-checkable order-column valign-middle"
                                  id="example4">
                                  <thead>
                                  <tr>
    
                                    <th> Application</th>
                                    <th> Profil </th>
                                    <!-- <th> Magasin </th> -->
                                    <th style="min-width: 50px !important;">
                                    </th>
                                  </tr>
                                  </thead>
                                  <tbody>
                                  <tr class="odd gradeX" *ngFor="let app of added_applications; 
                                  let index=index">
                                    <td>{{app.application.nom}}</td>
                                    <td><a href="">
                                     {{app.profil}} </a></td>
                                    <!-- <td><a href="">
                                      {{app.magasin}}</a></td> -->
                                      <td style="min-width: 50px !important;">
                                        <button (click)="supprimer_demande(index)"
                                        class="btn btn-danger btn-xs">
                                           <i class="fa fa-trash-o "></i> 
                                         </button>
                                      </td>
                                   
                                  </tr>
                       
    
                                  </tbody>
                                </table>
                              </div>
                              </fieldset>
                              <!-- <fieldset class="pt-5 pr-5 pl-5" style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                                <legend class="ml-5"> Accès </legend>
    
                            
                              <div class="table-scrollable">
                                <table
                                  class="table table-striped table-bordered table-hover table-checkable order-column valign-middle"
                                  id="example4">
                                  <thead>
                                  <tr>
                                    <th> User</th>    
                                    <th> Application</th>
                                    <th> Profil </th>
                                    <th> Magasin </th>
                                  </tr>
                                  </thead>
                                  <tbody>
                                  <tr class="odd gradeX" *ngFor="let app of access_it">
                                    <td>{{app.user.firstName}}</td>
                                    <td>{{app.application.nom}}</td>
                                    <td><a href="">
                                     {{app.profil}} </a></td>
                                    <td><a href="">
                                      {{app.magasin}}</a></td>
                                   <td> 
                                    <button (click)="retirDemande(app.id)"
                                     class="btn btn-danger btn-xs">
                                        <i class="fa fa-trash-o "></i> révocation
                                      </button>
                                   </td>
                                  </tr>
                       
    
                                  </tbody>
                                </table>
                              </div>
                              </fieldset> -->
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
    
                  </div>
                </div>
              </div>
            </div>
    <!-- end page content -->
    
            <!-- <div class="card">
              <div class="card-body">
    
                <div class="card-head">
                  
              </div>
    
            </div> -->
            <div class="card">
              <div class="card-body">
    
                <div class="card-head">
                  <fieldset class="pb-5" style="border: 2px solid rgb(187, 186, 186);border-radius: 10px;">
                    <legend class="ml-5"> Remarque </legend>
                <div class="row form-material mr-5 ml-5">
                  <div class="col-md-12">
                    <textarea class="form-control" formControlName="remarque" rows="5">
    
                    </textarea>
    
                  </div>
               
    
                </div>
                  </fieldset>
              </div>
    
            </div>
            </div>
            <div class="col-lg-12 p-t-20 text-center">
              <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink">Créer</button>
              <button type="button" (click)="reset()" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect m-b-10 btn-default">Annuler</button>
            </div>
    
      
    
  
    