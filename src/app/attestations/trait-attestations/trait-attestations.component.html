<div class="page-content-wrapper">
  <div class="page-content">
    <div class="page-bar">
      <div class="page-title-breadcrumb">
        <div class=" pull-left">
          <div class="page-title">Demande d'attestation</div>
        </div>
      </div>
    </div>
  
    <div class="row">
      <div class="col-md-12">
        <div class="tabbable-line">
       
          <div class="tab-content">
            <div class="tab-pane active fontawesome-demo" id="tab1">
              <div class="row">
                <div class="col-md-12">
                  <div class="card card-box">
                    <div class="card-head">
                      <header>Détails de demandes</header>
                      <div class="tools">
                        <a class="fa fa-repeat btn-color box-refresh"
                           href="javascript:;"></a>
                        <a class="t-collapse btn-color fa fa-chevron-down"
                           href="javascript:;"></a>
                        <a class="t-close btn-color fa fa-times"
                           href="javascript:;"></a>
                      </div>
                    </div>
                    <div class="card-body ">
                      <div class="row">
<!--                        <div class="col-md-6 col-sm-6 col-6">-->
<!--                          <div class="btn-group">-->
<!--                            <a id="addRow" class="btn btn-info" routerLink="/demande/add-demande">-->
<!--                              Add New <i class="fa fa-plus"></i>-->
<!--                            </a>-->
<!--                          </div>-->
<!--                        </div>-->
<!--                        <div class="col-md-6 col-sm-6 col-6">-->
<!--                          <div class="btn-group pull-right">-->
<!--                            <a class="btn deepPink-bgcolor  btn-outline dropdown-toggle"-->
<!--                               data-toggle="dropdown">Tools-->
<!--                              <i class="fa fa-angle-down"></i>-->
<!--                            </a>-->
<!--                           <ul class="dropdown-menu pull-right">-->
<!--                              <li>-->
<!--                                <a href="javascript:;">-->
<!--                                  <i class="fa fa-print"></i> Print </a>-->
<!--                              </li>-->
<!--                              <li>-->
<!--                                <a href="javascript:;">-->
<!--                                  <i class="fa fa-file-pdf-o"></i> Save as-->
<!--                                  PDF </a>-->
<!--                              </li>-->
<!--                              <li>-->
<!--                                <a href="javascript:;">-->
<!--                                  <i class="fa fa-file-excel-o"></i>-->
<!--                                  Export to Excel </a>-->
<!--                              </li>-->
<!--                            </ul>-->
<!--                          </div>-->
<!--                        </div>-->
                      </div> 
                      <div class="row mx-1 my-2" *ngIf="!isAdmin()">
                        <button (click)="open(contentRefuser)" class="btn btn-danger mr-5">
                          Rejeter 
                        </button>
                 
                        <button (click)="Valider_demande()" class="btn btn-success">Valider </button>
                      </div> 
                      <div class="row d-flex justify-content-end">
                       
                        <div class="mx-5">
                          <div class="btn-group">
                            <div class="row mb-3 text-center">
                              <div id="toolbar" class="col">
                                <label > Status</label>
                                <select class="form-control"  [(ngModel)]="status_selected" 
                                (change)="filter_by_status()"  
                                >
                                <option value="All">All</option> 

                                  <option value="envoyé">envoyée</option> 
                                  <option value="validée">validée</option>

                                  <option value="En instance">en instance</option>
                                  <option value="rejetée">rejetée</option>
          
                                </select>
                              </div>
                   
                            </div>
       
                          </div>
                        </div> 
                        <div class="">
                          <div class="btn-group">
                            <div class="row mb-3 text-center">
          
                              <div id="toolbar" class="col">
                                <label > Etablissement</label>
                               
                                <select class="form-control"  [(ngModel)]="etablissement_selected" 
                                (change)="filter_by_etablisement()"  
                                >
                                <option value="All">All</option> 
                                  <option *ngFor="let e of etablissements" [value]="e.name">{{e.name}}</option>
          
                                </select>
                              </div>
                   
                            </div>
       
                          </div>
                        </div>
                      </div>
                     
                      <div class="table-scrollable">
                        <table
                          class="table table-striped table-bordered table-hover table-checkable order-column valign-middle"
                          id="example4">
                          <thead>
                          <tr>
                            <th></th>
                            <th>Réference</th>
                            <th>Etablissement</th>
                            <!-- <th></th> -->
                            <th>Matricule</th>
                            <th>type de demande</th>
                            <th>Motif d'attestation</th>
                            <th>Date de signature</th>
                            <th>status</th>
                            <th>Commentaire</th>
                          </tr>
                          </thead>
                          
                          <tbody>
                          <tr class="odd gradeX" *ngFor="let demande of lignes" (change)="isvalide()" >

                            <td> 
                              <input  class="form-control-inline mx-2"
                              type="checkbox" id="category-1" 
                              (change)="getSelected2()" type="checkbox"
                             name="demandes"
                             value="{{demande.id}}"
                             [(ngModel)]="demande.isCkecked"/>
                            
                            </td>

                            <td  style="color: #0d47a1"> {{demande.reference}}</td>
                            
                            <!-- <td class="left">
                           
                               <select class="form-control" formControlName="etablissement" > -->
                              <!-- <input value={{demande.etablissement}} class="form-control-inline mx-2" name="etablissement" formControlName="etablissement"/> -->
                 <!-- <input type="text"  [(ngModel)]="etablissement" name="etablissement" value="{{demande.etablissement}}" id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock" />
                          
                         
                          </td> --> 
                         
                          <td class="left">

                     <input type="text"  value={{demande.etablissement}}  id="inputPassword5" class="form-control" aria-describedby="passwordHelpBlock" />
                            <!-- <select class="form-control"  [(ngModel)]="etablissement" name="etablissement" >
                            <option>{{demande.etablissement}}</option> -->
                          <!-- </select> -->
                      
                        </td>
                      
                            <td class="left"><select class="form-control" >
                              <option>{{demande.matricule}}</option>
                            </select></td>
                            <td class="left"><select class="form-control">
                              <option>{{demande.type}}</option>
                            </select></td>

                            <td class="left"><select class="form-control">
                              <option> {{demande.motif}} </option>
                            </select></td>
                            <td>{{demande.date|date}}</td> 
                            <td>

                            <span 
                             [ngClass]="{'annule':demande.status==='ANNULÉ','valide':demande.status==='VALIDÉE'}" 
                             class="badge" >{{demande.status}}</span>
                            </td>
                        
                            <td class="left"><textarea class="form-control">
                              {{demande.commentaire}}
                            </textarea></td>

                          <!-- <td>
                            <button (click)="open(contentRefuser)"  class="btn btn-danger mr-5">
                              Rejeter 
                            </button>
                          </td>
                          <td>
                            <button (click)="Valider_demande()" class="btn btn-success" [disabled]="demande.status=='validée'" >Valider </button> 
                          </td> -->
                          
                   
                         
                          </tr>


                          </tbody>
          
                        </table>
                      </div>
                    
                    </div>
                  </div>
               
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab2">
              <div class="row">
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof10.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Pooja Patel</div>
                          <div class="name-center"> Mathematics</div>
                        </div>
                        <p>A-103, shyam gokul flats, Mahatma Road <br/>Mumbai</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof1.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Rajesh</div>
                          <div class="name-center"> Science</div>
                        </div>
                        <p>45, Krishna Tower, Near Bus Stop, Satellite, <br/>Mumbai
                        </p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof2.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Sarah Smith</div>
                          <div class="name-center"> Computer</div>
                        </div>
                        <p>456, Estern evenue, Courtage area, <br/>New York</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof3.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">John Deo</div>
                          <div class="name-center"> Engineering</div>
                        </div>
                        <p>A-103, shyam gokul flats, Mahatma Road <br/>Mumbai</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof4.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Jay Soni</div>
                          <div class="name-center"> Music</div>
                        </div>
                        <p>45, Krishna Tower, Near Bus Stop, Satellite, <br/>Mumbai
                        </p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof5.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Jacob Ryan</div>
                          <div class="name-center"> Commerce</div>
                        </div>
                        <p>456, Estern evenue, Courtage area, <br/>New York</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof6.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Megha Trivedi</div>
                          <div class="name-center"> Mechanical</div>
                        </div>
                        <p>A-103, shyam gokul flats, Mahatma Road <br/>Mumbai</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof1.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Rajesh</div>
                          <div class="name-center"> Science</div>
                        </div>
                        <p>45, Krishna Tower, Near Bus Stop, Satellite, <br/>Mumbai
                        </p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof2.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Sarah Smith</div>
                          <div class="name-center"> Computer</div>
                        </div>
                        <p>456, Estern evenue, Courtage area, <br/>New York</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof10.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Pooja Patel</div>
                          <div class="name-center"> Mathematics</div>
                        </div>
                        <p>A-103, shyam gokul flats, Mahatma Road <br/>Mumbai</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof1.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">Rajesh</div>
                          <div class="name-center"> Science</div>
                        </div>
                        <p>45, Krishna Tower, Near Bus Stop, Satellite, <br/>Mumbai
                        </p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card card-box">
                    <div class="card-body no-padding ">
                      <div class="doctor-profile">
                        <img src="../assets/img/prof/prof3.jpg" class="doctor-pic"
                             alt="">
                        <div class="profile-usertitle">
                          <div class="doctor-name">John Deo</div>
                          <div class="name-center"> Engineering</div>
                        </div>
                        <p>A-103, shyam gokul flats, Mahatma Road <br/>Mumbai</p>
                        <div>
                          <p><i class="fa fa-phone"></i><a
                            href="tel:(123)456-7890"> (123)456-7890</a></p>
                        </div>
                        <div class="profile-userbuttons">
                          <a href="professor_profile.html"
                             class="btn btn-circle deepPink-bgcolor btn-sm">Read
                            More</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      
        </div>
      </div>
    </div>
    
  </div>
</div>



<ng-template #contentRefuser let-modal>
  <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Annuler demande d'Attestation</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
      </button>
  </div>
  <div class="modal-body">
      <form [formGroup]="form">

          <label>
              Motif  :</label>
          <div class="form-group">
              <select formControlName="motif" class="custom-select" required>
                  <option value="Signature contrat">
                    Signature contrat
                  </option>
                  <option value="Fréquence">
                    Fréquence
                  </option>
                  <option value="Blocage">
                    Blocage
                  </option>
              </select>
          </div>

          <label>
              Commentaire :</label>

          <textarea formControlName="commentaire" 
           class="form-control h-150px" rows="6" id="comment"></textarea>

      </form>

  </div>
  <div class="modal-footer">
      <button type="submit" (click)="Annuler_demande();modal.close('Save click')" class="btn btn-outline-dark" >Valider</button>
      <button type="submit" (click)="modal.close('Save click')" class="btn btn-outline-dark">Quitter</button>

  </div>
</ng-template>


<ng-template #contentValider let-modal>
  <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Valider Attestation</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
      </button>
  </div>
  <div class="modal-body">
      <form [formGroup]="form">

         
          <label>
            Type d'attestation :</label>
        <div class="form-group">
            <select formControlName="type" class="custom-select"
             (change)="selected_equipe($event)" required>
                <option value="Attestation de Pret">
                    Attestation de pret
                </option>
                <option value="Attestation de badge">
                    Attestation de badge
                </option>
                <option value="Attestation de Travail">
                    Attestation de travail
                </option>
                <option value="Attestation de l'IRPP">
                  Attestation de l'IRPP
              </option>
             
              <option value="Attestation de stage">
                  Attestation de stage
              </option>
              <option value="Attestation de salaire">
                  Attestation de salaire
              </option>
            </select>
        </div>
        <label> Etablissement :</label>
        <div class="form-group p-t-20">
          <select formControlName="etablissement" class="form-control">
            <option *ngFor="let e of etablissements" [value]="e.name"> {{e.name}} </option>
          </select>
      </div> 

      </form>

  </div>
  <div class="modal-footer">
      <button type="submit" (click)="Valider_demande();modal.close('Save click')" class="btn btn-outline-dark">Valider</button>
      <button type="submit" (click)="modal.close('Save click')" class="btn btn-outline-dark">Quitter</button>

  </div>
</ng-template>